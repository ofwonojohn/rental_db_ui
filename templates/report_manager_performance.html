<!DOCTYPE html>
<html>
<head>
  <title>Manager Performance</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .chart-container {
      width: 50% !important;   /* Chart will cover half the page */
      max-width: 500px;        /* Prevent it from being too large */
      margin: auto;            /* Center horizontally */
    }
  </style>
</head>
<body class="container py-4">
  <h1>ðŸ‘” Manager Performance</h1>
  <a href="/reports" class="btn btn-secondary mb-3">â¬… Back to Reports</a>

  <div class="chart-container">
    <canvas id="managerChart"></canvas>
  </div>

  <script>
    const ctx = document.getElementById('managerChart').getContext('2d');
    new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: {{ report | map(attribute='manager_name') | list | tojson }},
        datasets: [{
          data: {{ report | map(attribute='total_collected') | list | tojson }},
          backgroundColor: [
            'rgba(40, 167, 69, 0.7)',
            'rgba(23, 162, 184, 0.7)',
            'rgba(255, 193, 7, 0.7)',
            'rgba(220, 53, 69, 0.7)',
            'rgba(108, 117, 125, 0.7)'
          ],
          borderColor: [
            'rgba(40, 167, 69, 1)',
            'rgba(23, 162, 184, 1)',
            'rgba(255, 193, 7, 1)',
            'rgba(220, 53, 69, 1)',
            'rgba(108, 117, 125, 1)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'right' } }
      }
    });
  </script>
</body>
</html>
